                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   [{"title":"app-reset-design","url":"/2019/04/25/app-rest-desig/","content":"定义apiResultFull api根据resetfull API 规范定义一个自己的 api规范定义格式如下/app/userid/resnameGET、POST、PUT和DELETE所有请求使用http中请求类型表示其目的url只定义资源的路径包含一下几个动作类型资源服务器提供登录验证资源服务器提供版本支持和不同格式的请求第一个版本只提供json的格式请求","tags":["node","restify"],"categories":["技术文章"]},{"title":"node-restify","url":"/2019/04/25/node-restify/","content":"A Node.js web service framework optimized for building semantically correct RESTful web services ready for production use at scale. restify optimizes for introspection and performance, and is used in some of the largest Node.js deployments on Earth.","tags":["node","restify"],"categories":["技术文章"]},{"title":"Hello","url":"/2019/04/22/hexo/","content":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub.Quick StartCreate a new postMore info: WritingRun serverMore info: ServerGenerate static filesMore info: GeneratingDeploy to remote sitesMore info: Deployment","tags":["hexo"],"categories":["技术文章"]},{"title":"crontab-定时使用","url":"/2019/04/22/linux-crontab/","content":"linux 定时器的使用crontab 定时任务通过crontab 命令，我们可以在固定的间隔时间执行指定的系统指令或 shell script脚本。时间间隔的单位可以是分钟、小时、日、月、周及以上的任意组合。这个命令非常适合周期性的日志分析或数据备份等工作。1. 命令格式crontab [-u user] file crontab [-u user] [ -e | -l | -r ]2. 命令参数-u user：用来设定某个用户的crontab服务；file：file是命令文件的名字,表示将file做为crontab的任务列表文件并载入crontab。如果在命令行中没有指定这个文件，crontab命令将接受标准输入（键盘）上键入的命令，并将它们载入crontab。-e：编辑某个用户的crontab文件内容。如果不指定用户，则表示编辑当前用户的crontab文件。-l：显示某个用户的crontab文件内容，如果不指定用户，则表示显示当前用户的crontab文件内容。-r：从/var/spool/cron目录中删除某个用户的crontab文件，如果不指定用户，则默认删除当前用户的crontab文件。-i：在删除用户的crontab文件时给确认提示。3. crontab的文件格式分 时 日 月 星期 要运行的命令第1列分钟0～59第2列小时0～23（0表示子夜）第3列日1～31第4列月1～12第5列星期0～7（0和7表示星期天）第6列要运行的命令4. 常用方法创建一个新的crontab文件向cron进程提交一个crontab文件之前，首先要设置环境变量EDITOR。cron进程根据它来确定使用哪个编辑器编辑crontab文件。9 9 %的UNIX和LINUX用户都使用vi，如果你也是这样，那么你就编辑$HOME目录下的. profile文件，在其中加入这样一行:然后保存并退出。不妨创建一个名为 cron的文件，其中是用户名，例如， davecron。在该文件中加入如下的内容。保存并退出。注意前面5个域用空格分隔。在上面的例子中，系统将每隔1 5分钟向控制台输出一次当前时间。如果系统崩溃或挂起，从最后所显示的时间就可以一眼看出系统是什么时间停止工作的。在有些系统中，用tty1来表示控制台，可以根据实际情况对上面的例子进行相应的修改。为了提交你刚刚创建的crontab文件，可以把这个新创建的文件作为cron命令的参数:现在该文件已经提交给cron进程，它将每隔1 5分钟运行一次。同时，新创建文件的一个副本已经被放在/var/spool/cron目录中，文件名就是用户名(即dave)。列出crontab文件使用-l参数列出crontab文件:可以使用这种方法在$HOME目录中对crontab文件做一备份:这样，一旦不小心误删了crontab文件，可以用上一节所讲述的方法迅速恢复。编辑crontab文件如果希望添加、删除或编辑crontab文件中的条目，而EDITOR环境变量又设置为vi，那么就可以用vi来编辑crontab文件:可以像使用vi编辑其他任何文件那样修改crontab文件并退出。如果修改了某些条目或添加了新的条目，那么在保存该文件时， cron会对其进行必要的完整性检查。如果其中的某个域出现了超出允许范围的值，它会提示你。 我们在编辑crontab文件时，没准会加入新的条目。例如，加入下面的一条：保存并退出。注解最好在crontab文件的每一个条目之上加入一条注释，这样就可以知道它的功能、运行时间，更为重要的是，知道这是哪位用户的定时作业。删除crontab文件5. 使用实例实例1：每1分钟执行一次myCommand实例2：每小时的第3和第15分钟执行实例3：在上午8点到11点的第3和第15分钟执行实例4：每隔两天的上午8点到11点的第3和第15分钟执行实例5：每周一上午8点到11点的第3和第15分钟执行实例6：每晚的21:30重启smb实例7：每月1、10、22日的4 : 45重启smb实例8：每周六、周日的1 : 10重启smb实例9：每天18 : 00至23 : 00之间每隔30分钟重启smb实例10：每星期六的晚上11 : 00 pm重启smb实例11：每一小时重启smb实例12：晚上11点到早上7点之间，每隔一小时重启smb6. 使用注意事项注意环境变量问题有时我们创建了一个crontab，但是这个任务却无法自动执行，而手动执行这个任务却没有问题，这种情况一般是由于在crontab文件中没有配置环境变量引起的。在crontab文件中定义多个调度任务时，需要特别注环境变量的设置，因为我们手动执行某个任务时，是在当前shell环境下进行的，程序当然能找到环境变量，而系统自动执行任务调度时，是不会加载任何环境变量的，因此，就需要在crontab文件中指定任务运行所需的所有环境变量，这样，系统执行任务调度时就没有问题了。不要假定cron知道所需要的特殊环境，它其实并不知道。所以你要保证在shelll脚本中提供所有必要的路径和环境变量，除了一些自动设置的全局变量。所以注意如下3点：脚本中涉及文件路径时写全局路径；脚本执行要用到java或其他环境变量时，通过source命令引入环境变量，如:当手动执行脚本OK，但是crontab死活不执行时,很可能是环境变量惹的祸，可尝试在crontab中直接引入环境变量解决问题。如:注意清理系统用户的邮件日志每条任务调度执行完毕，系统都会将任务输出信息通过电子邮件的形式发送给当前系统用户，这样日积月累，日志信息会非常大，可能会影响系统的正常运行，因此，将每条任务进行重定向处理非常重要。 例如，可以在crontab文件中设置如下形式，忽略日志输出:“/dev/null 2&gt;&amp;1”表示先将标准输出重定向到/dev/null，然后将标准错误重定向到标准输出，由于标准输出已经重定向到了/dev/null，因此标准错误也会重定向到/dev/null，这样日志输出问题就解决了。系统级任务调度与用户级任务调度系统级任务调度主要完成系统的一些维护操作，用户级任务调度主要完成用户自定义的一些任务，可以将用户级任务调度放到系统级任务调度来完成（不建议这么做），但是反过来却不行，root用户的任务调度操作可以通过”crontab –uroot –e”来设置，也可以将调度任务直接写入/etc/crontab文件，需要注意的是，如果要定义一个定时重启系统的任务，就必须将任务放到/etc/crontab文件，即使在root用户下创建一个定时重启系统的任务也是无效的。其他注意事项新创建的cron job，不会马上执行，至少要过2分钟才执行。如果重启cron则马上执行。当crontab失效时，可以尝试/etc/init.d/crond restart解决问题。或者查看日志看某个job有没有执行/报错tail -f /var/log/cron。千万别乱运行crontab -r。它从Crontab目录（/var/spool/cron）中删除用户的Crontab文件。删除了该用户的所有crontab都没了。在crontab中%是有特殊含义的，表示换行的意思。如果要用的话必须进行转义%，如经常用的date ‘+%Y%m%d’在crontab里是不会执行的，应该换成date ‘+%Y%m%d’。更新系统时间时区后需要重启cron,在ubuntu中服务名为cron:ubuntu下启动、停止与重启cron:","tags":["linux","shell"],"categories":["技术文章"]},{"title":"linux常用命令","url":"/2019/04/22/linux常用命令/","content":"linux常用命令linux 常用命令1、ls命令   就是list的缩写，通过ls 命令不仅可以查看linux文件夹包含的文件，而且可以查看文件权限(包括目录、文件夹、文件权限)查看目录信息等等    常用参数搭配：    ls -a 列出目录所有文件，包含以.开始的隐藏文件    ls -A 列出除.及..的其它文件       2、cd命令3、pwd命令4、mkdir命令5、rm命令6、rmdir命令       从一个目录中删除一个或多个子目录项，删除某目录时也必须具有对其父目录的写权限。         注意：不能删除非空目录         实例：         （1）当parent子目录被删除后使它也成为空目录的话，则顺便一并删除         rmdir -p parent/child/child117、mv命令8、cp命令9、cat命令HelloWorldPWD=$(pwd)EOF         ls -l log.txt         cat log.txt         Hello         World         PWD=/opt/soft/test         （4）反向列示         tac log.txt         PWD=/opt/soft/test         World         Hello10、more命令11、less命令   less 与 more 类似，但使用 less 可以随意浏览文件，而 more 仅能向前移动，却不能向后移动，而且 less 在查看之前不会加载整个文件。         常用命令参数         -i  忽略搜索时的大小写         -N  显示每行的行号         -o  &lt;文件名&gt; 将less 输出的内容在指定文件中保存起来         -s  显示连续空行为一行         /字符串：向下搜索“字符串”的功能         ?字符串：向上搜索“字符串”的功能         n：重复前一个搜索（与 / 或 ? 有关）         N：反向重复前一个搜索（与 / 或 ? 有关）         -x &lt;数字&gt; 将“tab”键显示为规定的数字空格         b  向后翻一页         d  向后翻半页         h  显示帮助界面         Q  退出less 命令         u  向前滚动半页         y  向前滚动一行         空格键 滚动一行         回车键 滚动一页         [pagedown]： 向下翻动一页         [pageup]：   向上翻动一页         实例：         （1）ps查看进程信息并通过less分页显示         ps -aux | less -N         （2）查看多个文件         less 1.log 2.log         可以使用n查看下一个，使用p查看前一个12、head命令13、tail命令14、which命令15、whereis命令16、locate命令17、find命令18、chmod命令19、tar命令20、chown命令　　　　chown -c mail:mail log2012.log         （2）改变文件群组         chown -c :mail t.log         （3）改变文件夹及子文件目录属主及属组为mail         chown -cR mail: test/         （4）改变文件21、df命令22、du命令23、ln命令24、date命令25、cal命令26、grep命令27、wc命令28、ps命令29、top命令30、kill命令31、free命令","tags":["linux","shell"],"categories":["技术文章"]},{"title":"user-linux","url":"/2019/04/22/linux-user/","content":"linux 下用户管理如何添加或删除ubuntu用户和组在创建用户时，需要为新建用户指定一用户组，如果不指定其用户所属的工作组，自动会生成一个与用户名同名的工作组。创建用户user1的时候指定其所属工作组users，例：useradd –g users user1一、创建用户：使用命令 useradd例：useradd user1——创建用户user1例：useradd –u 600 user3  使用 passwd 命令为新建用户设置密码例：passwd user1注意：没有设置密码的用户不能使用。命令 usermod 修改用户账户例：将用户 user1的登录名改为  u1，usermod –l u1 user1例：将用户 user1 加入到 users组中，usermod –g users user1例：将用户 user1 目录改为/users/us1使用命令 userdel 删除用户账户例：删除用户user2userdel user2例：删除用户 user3，同时删除他的工作目录userdel –r user3查看用户信息id命令查看一个用户的UID和GID, 例：查看user4的idid user4finger命令 ——可以查看用户的主目录、启动shell、用户名、地址、电话等信息例：finger user4二、用户组：命令 groupadd创建用户组groupadd –g 888 users创建一个组users，其GID为888命令 gpasswd为组添加用户只有root和组管理员能够改变组的成员：例：把 user1加入users组gpasswd –a user1 users例：把 user1退出users组gpasswd –d user1 users命令groupmod修改组groupmod –n user users       修改组名user为usersgroupdel删除组groupdel users    删除组users","tags":["linux","shell"],"categories":["技术文章"]}]